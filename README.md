# Линтеры кода на Python

## Что это такое?

Программки утилиты для форматирования кода по стандартам PEP 8

Сюда пока что входят

- Isort (следит за импортами и отступами после и между ними)
- Flake8 (Статический анализ кода, т.е. он пишет, что не правильно по PEP 8)
- Black (Автоматический рефакторинг кода, автоматом делает правки)
- Pre-commit (Утилита, которая запускает линтеры, когда вы делаете commit'ы)

Как итог, вы не сможете залить "плохой" код в репозиторий, пока все pre-commit
hook'и не будут успешно проходить. Hook'и здесь как раз и есть наши линтеры.

Для того, чтобы это работало в вашем проекте связанным с удаленным git
репозиторием, вам надо установить линтеры, как пример даю установку через pip,
но в последующем и на реальных проектах лучше что-то вроде Poetry использовать

Команды для установки:

```
pip install isort
pip install flake8
pip install black
pip install pre-commit
pre-commit install
pre-commit autoupdate
```

---

# Что делает каждый из них

### Isort

Автоматически поставит импорты в правильном порядке, по принципу, что сначала
идут стандартные библиотеки, затем идут сторонние (которые мы устанавливаем,
например, через pip), дальше импорты файлов с нашего проекта. Также он добавит
пометки для них.

Настройка в файле: .isort.cfg

Команда для ручного запуска на файл

```
isort --settings-file ./.isort.cfg kek/1.py
```

В результате импорты в файле 1.py в папке kek будут отредактированы по
правильному формату.

---

### Flake8

Статический анализ кода.
Проверяет код на соответствие PEP 8, если не проходит, пишет в консоль, какое
правило оно нарушает. Править надо в ручную.

Можно прогнать самому командами нужные файлы, например:

```
flake8 --config .flake8 tests/*
```

В результате все файлы в проекте в папке tests будут проверены

Настройка в файле: .flake8

там можно добавить исключения для файлов, где должны быть ошибки, либо вообще 
убрать какие-то правила из проверки, но лучше этим не злоупотреблять.

---

### Black

Автоматический линтер. Умеет не только находить ошибки форматирования кода, но
и сам при запуске их исправляет. Может конфликтовать с Flake8

Настройка в файле: .black

Можно прогнать файлы командой:

```
black --config ./.black .
```

В результате все файлы в проекте будут проверены, за исключением папки файлов
окружения в .venv, её лучше всегда исключать, так как потом будут очень
неприятные ошибки в консоль выводиться.

---

### Pre-commit

Утилита, которая умеет запускать линтеры для проверки кода, до подтверждения
commit'а. В результате при нажатии commit теперь будут запускать isort, Flake8
и Black, проверять и редактировать код. Если все успешно пройдет, то код
будет за commit'чен, если нет, в консоль выведутся причины, Которые надо
будет поправить. Как итог "плохой" код с такой системой не сможет попасть в
удаленный репозиторий. если все разработчики все добросовестно все установили.

Настройка в файле: .pre-commit-config.yaml

Чтобы pre-commit срабатывал, надо выполнить команду:

```
pre-commit install
pre-commit autoupdate
```